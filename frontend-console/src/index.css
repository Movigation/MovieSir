@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Safari 100vh 문제 해결 */
  :root {
    --vh: 1vh;
  }

  html {
    @apply bg-[#0f0f13];
    min-height: 100%;
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html,
  body,
  #root {
    height: 100%;
  }

  body {
    @apply bg-[#0f0f13] text-gray-100;
    margin: 0;
    min-height: 100vh;
    min-height: -webkit-fill-available;
    /* 폰트 스택 - Mac/Windows 모두 지원 */
    font-family:
      'Pretendard',
      -apple-system,
      BlinkMacSystemFont,
      'Apple SD Gothic Neo',
      'Malgun Gothic',
      '맑은 고딕',
      'Segoe UI',
      Roboto,
      'Helvetica Neue',
      Arial,
      sans-serif;
  }

  /* Safari/iOS용 viewport height 수정 */
  @supports (-webkit-touch-callout: none) {
    body {
      min-height: -webkit-fill-available;
    }

    .h-screen {
      height: 100vh;
      height: -webkit-fill-available;
    }
  }

  /* Global Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.02);
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.1) rgba(255, 255, 255, 0.02);
  }
}

/* Scroll Animation */
@layer utilities {
  /* Fade Up - 아래에서 위로 */
  .animate-fade-up {
    opacity: 0;
    transform: translateY(60px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-fade-up.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Fade Down - 위에서 아래로 */
  .animate-fade-down {
    opacity: 0;
    transform: translateY(-60px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-fade-down.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Fade Left - 왼쪽에서 오른쪽으로 */
  .animate-fade-left {
    opacity: 0;
    transform: translateX(-80px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-fade-left.animate-in {
    opacity: 1;
    transform: translateX(0);
  }

  /* Fade Right - 오른쪽에서 왼쪽으로 */
  .animate-fade-right {
    opacity: 0;
    transform: translateX(80px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-fade-right.animate-in {
    opacity: 1;
    transform: translateX(0);
  }

  /* Scale Up - 작게서 크게 */
  .animate-scale-up {
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-scale-up.animate-in {
    opacity: 1;
    transform: scale(1);
  }

  /* Scale Down - 크게서 작게 */
  .animate-scale-down {
    opacity: 0;
    transform: scale(1.2);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-scale-down.animate-in {
    opacity: 1;
    transform: scale(1);
  }

  /* Rotate In - 회전하며 등장 */
  .animate-rotate-in {
    opacity: 0;
    transform: rotate(-10deg) scale(0.9);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-rotate-in.animate-in {
    opacity: 1;
    transform: rotate(0) scale(1);
  }

  /* Blur In - 블러에서 선명하게 */
  .animate-blur-in {
    opacity: 0;
    filter: blur(20px);
    transform: scale(1.1);
    transition: opacity 1.2s ease-out, filter 1.2s ease-out, transform 1.2s ease-out;
  }

  .animate-blur-in.animate-in {
    opacity: 1;
    filter: blur(0);
    transform: scale(1);
  }

  /* Flip In - 뒤집히며 등장 */
  .animate-flip-up {
    opacity: 0;
    transform: perspective(1000px) rotateX(30deg) translateY(50px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-flip-up.animate-in {
    opacity: 1;
    transform: perspective(1000px) rotateX(0) translateY(0);
  }

  /* Slide Up Bounce - 바운스 효과 */
  .animate-bounce-up {
    opacity: 0;
    transform: translateY(100px);
    transition: opacity 0.8s ease-out, transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .animate-bounce-up.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger children - 순차 등장 (위로) */
  .stagger-up > * {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .stagger-up.animate-in > *:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: translateY(0); }
  .stagger-up.animate-in > *:nth-child(2) { transition-delay: 0.2s; opacity: 1; transform: translateY(0); }
  .stagger-up.animate-in > *:nth-child(3) { transition-delay: 0.3s; opacity: 1; transform: translateY(0); }
  .stagger-up.animate-in > *:nth-child(4) { transition-delay: 0.4s; opacity: 1; transform: translateY(0); }
  .stagger-up.animate-in > *:nth-child(5) { transition-delay: 0.5s; opacity: 1; transform: translateY(0); }
  .stagger-up.animate-in > *:nth-child(6) { transition-delay: 0.6s; opacity: 1; transform: translateY(0); }

  /* Stagger Scale - 순차 확대 */
  .stagger-scale > * {
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .stagger-scale.animate-in > *:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: scale(1); }
  .stagger-scale.animate-in > *:nth-child(2) { transition-delay: 0.2s; opacity: 1; transform: scale(1); }
  .stagger-scale.animate-in > *:nth-child(3) { transition-delay: 0.3s; opacity: 1; transform: scale(1); }
  .stagger-scale.animate-in > *:nth-child(4) { transition-delay: 0.4s; opacity: 1; transform: scale(1); }
  .stagger-scale.animate-in > *:nth-child(5) { transition-delay: 0.5s; opacity: 1; transform: scale(1); }
  .stagger-scale.animate-in > *:nth-child(6) { transition-delay: 0.6s; opacity: 1; transform: scale(1); }

  /* Stagger Fade Left/Right - 양쪽에서 순차 */
  .stagger-sides > *:nth-child(odd) {
    opacity: 0;
    transform: translateX(-50px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .stagger-sides > *:nth-child(even) {
    opacity: 0;
    transform: translateX(50px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .stagger-sides.animate-in > *:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: translateX(0); }
  .stagger-sides.animate-in > *:nth-child(2) { transition-delay: 0.2s; opacity: 1; transform: translateX(0); }
  .stagger-sides.animate-in > *:nth-child(3) { transition-delay: 0.3s; opacity: 1; transform: translateX(0); }
  .stagger-sides.animate-in > *:nth-child(4) { transition-delay: 0.4s; opacity: 1; transform: translateX(0); }
  .stagger-sides.animate-in > *:nth-child(5) { transition-delay: 0.5s; opacity: 1; transform: translateX(0); }
  .stagger-sides.animate-in > *:nth-child(6) { transition-delay: 0.6s; opacity: 1; transform: translateX(0); }

  /* Stagger Rotate - 순차 회전 */
  .stagger-rotate > * {
    opacity: 0;
    transform: rotate(-15deg) scale(0.9);
    transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .stagger-rotate.animate-in > *:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: rotate(0) scale(1); }
  .stagger-rotate.animate-in > *:nth-child(2) { transition-delay: 0.15s; opacity: 1; transform: rotate(0) scale(1); }
  .stagger-rotate.animate-in > *:nth-child(3) { transition-delay: 0.2s; opacity: 1; transform: rotate(0) scale(1); }
  .stagger-rotate.animate-in > *:nth-child(4) { transition-delay: 0.25s; opacity: 1; transform: rotate(0) scale(1); }
  .stagger-rotate.animate-in > *:nth-child(5) { transition-delay: 0.3s; opacity: 1; transform: rotate(0) scale(1); }
  .stagger-rotate.animate-in > *:nth-child(6) { transition-delay: 0.35s; opacity: 1; transform: rotate(0) scale(1); }

  /* Continuous Spin Animation */
  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }

  /* Film Strip Scroll Animations - S자 형태 */
  @keyframes film-scroll-right {
    0% {
      transform: translateX(-50%) rotate(-15deg);
    }
    100% {
      transform: translateX(0%) rotate(-15deg);
    }
  }

  @keyframes film-scroll-left {
    0% {
      transform: translateX(50%) rotate(15deg);
    }
    100% {
      transform: translateX(0%) rotate(15deg);
    }
  }

  .animate-film-scroll-right {
    animation: film-scroll-right 60s linear infinite;
  }

  .animate-film-scroll-left {
    animation: film-scroll-left 55s linear infinite;
  }

  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Firefox */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.1) transparent;
  }

  /* Safari backdrop-blur 폴백 */
  @supports not ((-webkit-backdrop-filter: blur(12px)) or (backdrop-filter: blur(12px))) {
    .backdrop-blur-sm,
    .backdrop-blur-md {
      background-color: rgba(255, 255, 255, 0.95) !important;
    }
  }

  /* 스크롤바 숨기기 */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* 활성 포스터 테두리 글로우 */
  .animate-ring-glow {
    box-shadow: 0 0 14px 4px rgba(59, 130, 246, 0.8);
  }
}
